---
import BaseLayout from './BaseLayout.astro';
import Sidebar from '../components/Sidebar.astro';
import TOC from '../components/TOC.astro';

interface Props {
  frontmatter: {
    title: string;
    description?: string;
  };
  headings: Array<{ depth: number; slug: string; text: string }>;
}

const { frontmatter, headings } = Astro.props;
---

<BaseLayout title={frontmatter.title} description={frontmatter.description}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 py-8">
    <div class="flex gap-8">
      <!-- 사이드바 -->
      <Sidebar />

      <!-- 메인 콘텐츠 -->
      <article class="flex-1 min-w-0">
        <header class="mb-8 pb-6 border-b border-gray-200">
          <h1 class="text-3xl font-bold text-gray-900 mb-2">
            {frontmatter.title}
          </h1>
          {frontmatter.description && (
            <p class="text-lg text-gray-600">{frontmatter.description}</p>
          )}
        </header>

        <div class="prose prose-gray max-w-none prose-headings:scroll-mt-20 prose-a:text-primary-600 prose-code:text-primary-700">
          <slot />
        </div>
      </article>

      <!-- 목차 (TOC) -->
      <TOC headings={headings} />
    </div>
  </div>
</BaseLayout>
